5 COM K$[1]
10 REM*PILOT 73 SYSTEM BY GREGORY YOB
15 REM*2296 BRYANT PALO ALTO CAL. 326-4039
20 I=0
30 REM- COPYRIGHT,1972
40 DIM A$[41],B$[41],C$[41],D$[41],E$[41],F$[41]
50 DIM S$[72],O$[72]
60 DIM T$[72]
70 REM-SET P0 TO LENGTH OF S$ AND O$ ABOVE
80 PO=72
90 DIM A[250],B[250],L[50],M[50]
100 DEF FNA(X)=X-INT((X-1)/6)*6
110 DEF FNB(X)=INT((X-1)/6)+1
120 IF K$#"" THEN 190
130 PRINT "INSTRUCTIONS";
140 INPUT S$
150 IF S$[1,1]$"Y" THEN 190
160 CHAIN "PILOT3"
190 FILES TEST,E
200 IF END #1 THEN 260
210 READ $1,1
220 MAT READ #1;A
230 READ #1,S
240 MAT READ #1;B
250 GOTO 310
260 GOSUB 5690
300 PRINT "SCRATCH PERFORMED ON FILE"
310 REM-EDITOR PROGRAM
320 PRINT "EDITOR IN"
330 PRINT "EH";
340 INPUT S$
350 I6=0
360 GOSUB 5410
370 IF N<1 THEN 2000
380 REM-NUMERIC COMMANDS
390 IF S#([1,2]="??" THEN 700
400 IF S$[1,1]="?" THEN 900
410 IF S$#"" THEN 1000
420 REM-DELETE A LINE
430 FOR I=1 TO 240
440 IF A(I)=N THEN 470
450 NEXT I
460 GOTO 340
470 IF A[I+1]=N THEN 580
480 REM-SINGLE LINE
490 P=B[I]
500 FOR J=1 TO 239
510 A[J]=A[J+1]
520 B[J]=B[J+1]
530 NEXT J
540 A[240]=O
550 B[240]=P
560 GOSUB 5200
570 GOTO 340
580 REM-DOUBLE LINE
590 P=B[I]
600 P1=B[I+1]
610 FOR J=1 TO 238
620 A[J]=A[J+2]
630 B[J]=B[J+2]
640 NEXT J
650 A[240]=A[239]=0
660 B[239]=P
670 B[240]=P1
680 GOSUB 5200
690 GOTO 340
700 REM-LIST TEN LINES
710 FOR I=1 TO 240
720 IF A[I] >= N THEN 750
730 NEXT I
740 GOTO 340
750 PRINT ""
760 J1=0
770 IF J1>10 THEN 870
780 GOSUB 5270
790 IF A[I+1#A[I] THEN 820
800 I=I+1
810 IF S$="" THEN 870
820 PRINT A(I);S$
830 I=I+1
840 IF A[I]<1 THEN 870
850 J1=J1+1
860 GOTO 770
870 PRINT ""
880 GOTO 340
890 REM-ONE LINE
900 FOR J=1 TO 240
910 IF A[J]=N TEN 940
920 NEXT J
930 GOTO 340
940 PRINT ""
950 I=J
960 GOSUB 5270
970 PRINT A[I];S$
980 PRINT ""
990 GOTO 340
1000 REM- INSERT OF OVERWRITE
1010 FOR I=1 TO 240
1020 IF A[I]=N THEN 1080
1030 IF A[I]>N THEN 1400
1040 IF A[I]=0 THEN 1570
1050 NEXT I
1060 PRINT "NO MORE SPACE"
1070 GOTO 340
1080 REM-OVERWRITE
1090 IF I+1>249 THEN 1110
1100 IF A[I]=A[I+1] THEN 1250
1110 REM- ONE LINE IN FILE
1120 IF LEN(S$)>4)1 THEN 1160
1130 GOSUB 5040
1140 GOTO 340
1150 REM- TWO LINE INSERT, ONE LINE IN FILE
1160 T$=S$
1170 S$=S$[1,41]
1180 GOSUB 5040
1190 I=I+1
1200 S$=T$[42]
1210 GOSUB 1910
1220 GOSUB 5040
1230 GOSUB 4200
1240 GOTO 340
1250 REM- TWO LINES IN FILE
1260 IF LEN(S$)>41 THEN 1320
1270 REM - ONE LINE TO PUT INTO TWO LINE FILE
1280 GOSUB 1820
1290 GOSUB 5040
1300 GOSUB 5200
1320 REM- TWO AND TWO
1330 T$=S$
1340 S$=S$[1,41]
1350 GOSUB 5040
1360 I=I+1
1370 S$=T$[42]
1380 GOSUB 5040
1390 GOTO 340
1400 REM- INSERTION
1410 FOSUB 1910
1420 IF LEN(S$)>41 THEN 1470
1430 REM- SINGLE INSERT
1440 GOSUB 5040
1450 GOSUB 5200
1460 GOTO 340
1470 REM- DOUBLE INSERTION
1480 T$=S$
1490 S$=S$[1,41]
1500 GOSUB 5040
1510 I=I+1
1520 S$=T[42]
1530 GOSUB 1910
1540 GOSUB 5200
1560 GOTO 340
1570 REM- LAST LINE CASE
1580 IF LEN(S$)>41 THEN 1650
1590 REM- ONE LINE, PLEASE
1600 A[I]=N
1610 GOSUB 5040
1620 GOSUB 5200
1630 GOTO 340
1640 REM-DOUBLE IF YOU WISH
1650 A[I]=N
1660 A[I+1]=N
1670 T$=S$
1680 S$=S$[1,41]
1690 GOSUB 5040
1700 S$=T$[42]
1710 I=I+1
1720 GOSUB 5040
1730 GOSUB 5200
1740 GOTO 340
1820 REM- GIVEN I< DELETE THE LINE
1830 P=B[I]
1840 FOR J=1 TO 239
1850 A[J]=A[J+1]
1860 B[J]=B[J+1]
1870 NEXT J
1880 A[240==O
1890 B[240]=P
1900 RETURN
1910 REM- GIVEN I , HUPP OUT ONE LINE
1920 P=B[240]
1930 FR J=240 TO I+1 STEP -1
1940 A[J]=A[J=1]
1950 B[J]=B[J-1]
1960 NEXT J
1970 A[I]=N
1980 B[I]=P
1990 RETURN
2000 REM-NON NUMERIC COMMANDS
2010 S$=S$[1,3]
2020 IF S$="SCR" THEN 2070
2030 IF S$="LIS" THEN 2100
2040 IF S$="REN" THEN 2220
2050 IF S$="RUN" THEN 2360
2060 GOTO 330
2070 REM- SCRATCH
2080 GOSUB 5690
2090 GOTO 340
2100 REM-LIST
2110 PRINT ""
2120 FOR I=1 TO 240
2130 IF A[I]<1 THEN 2190
2140 GOSUB 5270
2150 PRINT A[I];S$
2160 IF A[I]#A[I+1] THEN 2180
2170 I=I+1
2180 NEXT I
2190 PRINT ""
2200 GOTO 340
2210 REM- RENUMBER
2220 I5=10
2230 FOR I=1 TO 240
2240 IF A[I]<1 THEN 2340
2250 FOR I=1 TO 240
2260 A[I]=I5
2270 I5=I5+10
2280 GOTO 2330
2290 A[I]=I5
2300 A[I+1]=I5
2310 I=I+1
2320 GOTO 2270
2330 NEXT I
2340 GOSUB 5200
2350 GOTO 340
2360 CHAIN "PILOT2"
5040 REM-GIVEN I, STASH S$
5050 V=FNB(B[I])+8
5060 READ #1,V;A$,B$,C$,D$,E$,F$
5070 GOTO FNA(B[I]) OF 5080,5100,5120,5140,5160,5180
5080 PRINT #1,V;A$,B$,C$,D$,E$,F$
5090 RETURN
5100 PRINT #1,V;A$,S$,C$,D$,E$,F$
5110 RETURN
5120 PRINT #1,V;A$,B$,S$,D$,E$,F$
5130 RETURN
5140 PRINT #1,V;A$,B$,C$,S$,E$,F$
5150 RETURN
5160 PRINT #1,V;A$,B$,C$,D$,S$,F$
5170 RETURN
5180 PRINT #1,V;A$,B$,C$,D$,E$,S$
5190 RETURN
5200 REM-PRINT A AND B ARRAYS
5210 READ #1,1
5220 MAT PRINT #1;A
5230 READ #1,5
5240 MAT PRINT #1;B
5250 RETURN
5270 REM- EXTRACT S$ WHEN GIVEN I
5280 READ#1,FNB(B[I])
5290 FOR I=1 TO FNA(B[I])
5300 READ #1;S$
5310 NEXT J
5320 IF I+1>240 THEN 5400
5330 IF A[I+1]#A[I] THEN 5400
5340 I6=B[I+1]
5350 READ #1,FNB(I6)+8
5360 FOR J=1 TO FNA(A)
5370 READ #1;A$
5380 NEXT J
5390 S$[LEN(S$)+1)=A$
5400 RETURN
5410REM-GIVEN S$ GET N
5419 DIM Z$[10]
5420 Z$="0123456789"
5430 N=-1
5440 GOSUB 5550
5450 IF S$="" THEN 5540
5460 GOSUB 5550
5450 IF N1<0 THEN 5530
5480 IF N>-1 THEN 5500
5490 N=0
5500 N=10*N+N1
5510 S$=S$[2]
5520 GOTO 5550
5540 RETURN
5550 REM-REBLANK S$
5560 IF S$[1,1]#" " THEN 5600
5570 S$=S$[2]
5580 IF S$="" THEN 5600
5590 GOTO 5560
5600 RETURN
5610 REM-DIGIT SCAN
5620 N1=-1
5630 FOR J=1 TO 10
5640 IF S$[1,1]#Z$[J,J] THEN 5670
5650 N1=J-1
5660 RETURN
5670 NEXT J
5680 RETURN
5690 REM-SCRATCH ROUTINE
5700 MAT A=ZER
5710 MAT B=ZER
5720 FOR J=1 TO 240
5730 B[J]=J
5740 NEXT J
5750 A$=""
5760 FOR J=9 TO 48
5770 PRINT #1,J:A$,A$,A$,A$,A$,A$
5780 NEXT J
5790 GOSUB 5200
6100 END
