100 REM PROGRAM TO DEMONSTRATE LINKAGE TO ANOTHER PROGRAM USING BASIC
110 REM THE PROGRAM IS A VERY SLIGHTLY MODIFIED VERSION OF SIEVEN
120 REM DOMPIER'S MUSIC ROUTINE. SEE PCC VOL. 3 NO. 5 PAGE 9.
140 REM PUT THE PROGRAM STARTING ADDRESS IN USRLOC. SEE APPENDIX U
150 REM ALTAIR BASIC REFERENCE MANUAL.
160 A=7936:I=INT(A/256):J=A-I*256:POKE 79,J:POKE 80,I
170 REM 7936 DECIMAL = 17400 OCTAL. 79 DECIMAL = 117 OCTAL
190 REM GET PROGRAM FROM DATA, CONVERT TO TRUE OCTAL, AND
200 REM STORE IN MEMORY STARTING AT 17400 OCTAL.
210 FOR N=0 TO 25:READ K:GOSUB 330
230 A=7936+N:POKE A,D:NEXT N
240 REM INPUT NOTES AND/OR TERMINATE SIGNAL FROM KEYBOARD, CONVERT
250 REM INTO TRUE OCTAL AND STORE IN MEMORY JUST ABOVE THE PROGRAM.
260 A=7968
270 INPUT K:GOSUB 330
280 IF D < 0 THEN 270
285 POKE A,D:A=A+1:IF D>=255 THEN 270
290 GOTO 450
300 REM SUBROUTINE TO CONVERT WHAT LOOKS LIKE AN OCTAL NUMBER
310 REM INTO THE CORRECT VALUE. ALSO CHECKS FOR NUMBERS WHICH
320 REM CANNOT BE OCTAL, WHICH ARE GREATER THAN 377, OR ARE MINUS.
330 X=INT(K/100):Y=INT((K-(X*100))/10):Z=K-(X*100)-(Y*10)
340 IF K>=0 AND X<=3 AND Y<=7 AND Z<=7 THEN D=64*X+8*Y+Z:RETURN
350 D=-1:PRINT "ERROR":RETURN
370 REM PROGRAM STORED IN FAKE OCTAL IN A DATA STATEMENT
390 DATA A1,40,37,176,376,377,310,26,40,5,302,16,37,106,15,302,11
390 DATA 37,25,346,3,349,33,3,37
400 REM ENTER HERE TO CHANGE TEMPO
410 INPUT "TEMPO";K:GOSUB 330
420 IF D<0 THEN 410
430 POKE 7944,D
440 REM RUN THE PROGRAM BY CALLING USER FUNCTION
450 W=USR(1)
460 STOP
999 END